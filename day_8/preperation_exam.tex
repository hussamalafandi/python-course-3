\documentclass[12pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[ngerman]{babel}
\usepackage{amsmath,amssymb,geometry,listings}
\geometry{
  left=2cm,
  right=2cm,
  top=2cm,
  bottom=2.5cm
}

\title{\textbf{Klausur: Python-Grundlagen, OOP, Algorithmik, NumPy und Pandas}}
\author{(Keine Hilfsmittel erlaubt)}
\date{\today}

\lstset{
  language=Python,
  basicstyle=\footnotesize\ttfamily,
  columns=flexible,
  breaklines=true,
  frame=single,
  showstringspaces=false
}

\begin{document}

\maketitle

\textbf{Anleitung:} Beantworten Sie alle Fragen in deutscher Sprache. Schreiben Sie Ihre Lösungen sauber und nachvollziehbar. Begründen Sie bei Bedarf Ihre Antworten mit kurzen Erklärungen. Keine Hilfsmittel (Skripte, Internet etc.) sind erlaubt. Bearbeitungszeit: 90 Minuten.

\section*{1. Python Fundamentals \& Environment Setup (7 Punkte)}

\begin{enumerate}
  \item \textbf{Virtuelle Umgebungen (3 Punkte)}
  \begin{enumerate}
    \item Erklären Sie den Zweck einer virtuellen Umgebung (\texttt{venv} oder \texttt{conda}). Warum ist es sinnvoll, eine zu verwenden?  
    \item Wie können Sie in \texttt{conda} eine neue Umgebung erstellen und aktivieren? Nennen Sie die wichtigsten Befehle.
  \end{enumerate}
  
  \item \textbf{Jupyter Notebook (2 Punkte)}
  \begin{enumerate}
    \item Beschreiben Sie kurz den Aufbau eines Jupyter Notebooks. Welche Zelltypen gibt es?
    \item Welche Vorteile bieten Jupyter Notebooks gegenüber einfachen Python-Skripten?
  \end{enumerate}

  \item \textbf{Code-Fehler finden (2 Punkte)}  
  Betrachten Sie folgenden Python-Code:

\begin{lstlisting}
my_var = "Hello"

if my-var == "Hello":
    print("Yes, it's Hello")
else:
    print("No, it's not Hello")
\end{lstlisting}

  \begin{enumerate}
    \item Der Code erzeugt einen Fehler. Nennen Sie die Ursache und schlagen Sie eine Korrektur vor. (1 Punkt)
    \item Nehmen Sie an, Sie möchten eine weitere Zeile hinzufügen, die die Länge von \texttt{my\_var} ausgibt. Schreiben Sie die fehlende Codezeile. (1 Punkt)
  \end{enumerate}

\end{enumerate}

\vspace{0.5em}

\section*{2. Object-Oriented Programming (OOP) (12 Punkte)}

\begin{enumerate}
  \item \textbf{Grundlagen und Konzepte (4 Punkte)}
  \begin{enumerate}
    \item Was versteht man unter einer Klasse und einem Objekt? Nennen Sie ein kurzes Beispiel in Python. (2 Punkte)
    \item Erklären Sie kurz \textit{Encapsulation}, \textit{Inheritance} und \textit{Polymorphism}. (2 Punkte)
  \end{enumerate}

  \item \textbf{Vererbung (4 Punkte)}
  \begin{enumerate}
    \item Wie erstellt man eine Unterklasse in Python? Geben Sie ein kleines Beispiel. (2 Punkte)
    \item Welche Bedeutung hat die Funktion \texttt{super} bei der Vererbung? (2 Punkte)
  \end{enumerate}

  \item \textbf{Code-Frage: Fehler erkennen (4 Punkte)}  
  Betrachten Sie folgenden Code-Ausschnitt:

\begin{lstlisting}
class Animal:
    def __init__(self, name):
        self.__name = name

    def speak(self):
        print("...")

class Dog(Animal):
    def __init__(self, name, breed):
        super().__init__(name)
        self.breed = breed

    def speak():
        print(f"{self.__name} barks!")

my_dog = Dog("Rex", "Labrador")
my_dog.speak()
\end{lstlisting}

  \begin{enumerate}
    \item Der Code kompiliert, aber es tritt ein Fehler zur Laufzeit auf. Erklären Sie den Fehler und schlagen Sie eine Lösung vor. (2 Punkte)
    \item Nach der Korrektur möchten Sie das Attribut \texttt{breed} als privat kennzeichnen. Wie ändern Sie den Code? (1 Punkt)
    \item Warum könnte das Anlegen privater Attribute (z.B. \_\_name) sinnvoll sein? (1 Punkt)
  \end{enumerate}

\end{enumerate}

\vspace{0.5em}

\section*{3. Algorithmic Thinking, Efficiency und Rekursion (10 Punkte)}

\begin{enumerate}
  \item \textbf{Big-O und Suchen (3 Punkte)}
  \begin{enumerate}
    \item Was versteht man unter \texttt{O(n)} und \texttt{O(log n)} in Bezug auf die Laufzeit? (1 Punkt)
    \item Warum kann Binary Search nicht auf unsortierten Daten angewendet werden? (1 Punkt)
    \item Geben Sie ein Beispiel für einen Anwendungsfall von Linear Search. (1 Punkt)
  \end{enumerate}

  \item \textbf{Sortieralgorithmen (3 Punkte)}
  \begin{enumerate}
    \item Erklären Sie das Grundprinzip von Bubble Sort. (1 Punkt)
    \item Warum ist Bubble Sort meistens nicht effizient? (1 Punkt)
    \item Welche Komplexität hat Quick Sort im schlechtesten Fall? (1 Punkt)
  \end{enumerate}

  \item \textbf{Rekursion (4 Punkte)}  
  Unten sehen Sie eine unvollständige rekursive Funktion, die die Fakultät einer Zahl berechnet. Vervollständigen Sie den Code und erklären Sie den Basisfall.

\begin{lstlisting}
def factorial(n):
    # TODO: Basisfall ergänzen
    if n < 0:
        return None
    else:
        # TODO: Rekursionsfall ergänzen
\end{lstlisting}

  \begin{enumerate}
    \item Ergänzen Sie die fehlenden Zeilen, sodass \texttt{factorial(4)} den Wert 24 liefert. (2 Punkte)
    \item Erklären Sie, was passiert, wenn Sie \texttt{factorial(-1)} aufrufen und warum. (1 Punkt)
    \item Welche Rolle spielt Memoization in Rekursionsverfahren? (1 Punkt)
  \end{enumerate}

\end{enumerate}

\vspace{0.5em}

\section*{4. NumPy (10 Punkte)}

\begin{enumerate}
  \item \textbf{Arrays erstellen und Attribute (3 Punkte)}
  \begin{enumerate}
    \item Wie erstellt man in NumPy ein Array mit Werten von 0 bis 9 (inklusive) und Schrittweite 1? (1 Punkt)
    \item Welche Informationen liefern \texttt{.shape} und \texttt{.dtype}? (1 Punkt)
    \item Geben Sie ein Beispiel für die Verwendung von \texttt{np.linspace}. (1 Punkt)
  \end{enumerate}

  \item \textbf{Broadcasting und Operationen (4 Punkte)}
  \begin{enumerate}
    \item Warum ist Broadcasting ein Vorteil in NumPy? (1 Punkt)
    \item Gegeben: 
\begin{lstlisting}
import numpy as np
A = np.array([[1, 2, 3],
              [4, 5, 6]])
B = np.array([10, 20, 30])
\end{lstlisting}
        Was ist das Ergebnis von \texttt{A + B}? Notieren Sie die entstehende Matrix. (2 Punkte)
    \item Nennen Sie zwei Aggregationsfunktionen und deren Zweck. (1 Punkt)
  \end{enumerate}

  \item \textbf{Form und Matrixmanipulation (3 Punkte)}
  \begin{enumerate}
    \item Geben Sie ein Beispiel, wie man ein 1D-Array der Länge 6 in ein 2D-Array der Form (2,3) umwandelt. (1 Punkt)
    \item Wie transponiert man eine Matrix \texttt{M} in NumPy? (1 Punkt)
    \item Vervollständigen Sie den Code, der das Matrixprodukt von \texttt{A} und \texttt{C} berechnet:
\begin{lstlisting}
A = np.array([[1,2],[3,4]])
C = np.array([[5],[6]])  # 2x1 Matrix

# TODO: Matrixprodukt
result = ?
\end{lstlisting}
      (1 Punkt)
  \end{enumerate}
\end{enumerate}

\vspace{0.5em}

\section*{5. Pandas (12 Punkte)}

\begin{enumerate}
  \item \textbf{Grundlagen (4 Punkte)}
  \begin{enumerate}
    \item Was ist der Unterschied zwischen \texttt{Series} und \texttt{DataFrame}? (1 Punkt)
    \item Wie liest man eine CSV-Datei \texttt{data.csv} in ein DataFrame \texttt{df} ein? (1 Punkt)
    \item Nennen Sie zwei wichtige Attribute eines DataFrame und erklären Sie diese. (2 Punkte)
  \end{enumerate}

  \item \textbf{Selektion und Datenbereinigung (4 Punkte)}
  \begin{enumerate}
    \item Wie finden Sie fehlende Werte in einer bestimmten Spalte \texttt{mycol}? Schreiben Sie einen beispielhaften Pandas-Code. (1 Punkt)
    \item Was ist der Unterschied zwischen \texttt{df.loc} und \texttt{df.iloc}? (1 Punkt)
    \item Betrachten Sie den Code:
\begin{lstlisting}
df_new = df[df['column'] > 100]
df_new.sort_values(by='column', ascending=False)
\end{lstlisting}
        Welche Zeilen werden in \texttt{df\_new} enthalten sein und wie ist deren Sortierreihenfolge? (2 Punkte)
  \end{enumerate}

  \item \textbf{Gruppierung, Pivot-Tabellen und Plotten (4 Punkte)}
  \begin{enumerate}
    \item Wie berechnen Sie den mittleren Wert einer Spalte \texttt{Value} für jede Kategorie in \texttt{Category} mithilfe von \texttt{groupby}? (1 Punkt)
    \item Erstellen Sie eine Pivot-Tabelle, die den Durchschnitt der Spalte \texttt{Sales} anzeigt, gruppiert nach \texttt{Store} (Zeilen) und \texttt{Product} (Spalten). Geben Sie ein kurzes Code-Beispiel. (1 Punkt)
    \item Welche Schritte sind nötig, um eine Zeitspalte in das Datetime-Format zu konvertieren und die Daten anschließend wöchentlich zu resamplen? (1 Punkt)
    \item Schreiben Sie einen Einzeiler-Code, der ein Liniendiagramm der Spalte \texttt{Revenue} zeichnet. (1 Punkt)
  \end{enumerate}
\end{enumerate}

\vspace{1em}
\hrule
\vspace{0.5em}

\textbf{Punkteschlüssel:}
\begin{itemize}
  \item Teil 1: 7 Punkte
  \item Teil 2: 12 Punkte
  \item Teil 3: 10 Punkte
  \item Teil 4: 10 Punkte
  \item Teil 5: 12 Punkte
\end{itemize}
\textit{(Gesamt: 51 Punkte)}

\vspace{0.5em}
\textbf{Viel Erfolg bei der Klausur!}

\end{document}
